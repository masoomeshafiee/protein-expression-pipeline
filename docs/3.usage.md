# Usage

#### How to use
##### 1. Activate your environemnet
In your terminal run: 
``` bash
conda activate protein-expression-env
```
 ##### 2. Place the raw data (dual image.TIF) in the data/raw directory.
Note: 
- Only include the fluorescence images in the raw folder not Brightfield images.
- Make sure other folders in the "data" directory are empty and you dont have any data from the previous analysis inside thoise folders. . 

 #
 ##### 3. Configure config.json
Open the config.json file and update paths and parameters inside the file to match your data and preferences.
For more instruction read the configuration.md file. 

##### 2. Run the run_preprocess.py
- Spliting dual-camera stacks into GFP and RFP channels
- Performing max projection along the z-axis (for segmentation)

In your terminal run:
 ``` bash
python src/run_preprocess.py
```
The projected GFP images are automatically saved under data/projected directory ready for segmentation.

##### 3. Proceed with the segmentation using CellPose. 
- Open the data/projected direcotry and use the projected GFP images for segmentation. 
- Perform segmentation externally using Cellpose
- Put the .png mask files in the data/mask directory

##### 4. Run the full analysis pipeline
In your terminal run the following line:
``` bash
python src/pipeline.py
```
You can check the real-time logging in the terminal to monitor the analysis progress.
The outputs will automatically be saved in the output directory. The outputs are : 
- processed_data.csv – Full copy number analysis
- copy_number_stats.csv – Summary statistics
- copy number plots as both png and svg files
- metadata_<proteinname>_<timestamp>.json – Reproducibility file (settings, versions)

##### 5. Plot without reprocessing (Optional)
#
``` bash
python src/plot_only.py
```
Use this script to try different plotting options without rerunning the analysis pipeline.